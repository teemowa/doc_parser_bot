Бот для Анализа PDF-документов
Этот проект представляет собой Telegram-бота для комплексного анализа PDF-документов. Бот получает PDF-файл, обрабатывает его с помощью набора моделей машинного обучения и возвращает пользователю подробный отчет о найденных объектах.

Основные Функции
Детекция Объектов: Обнаружение четырех типов объектов на страницах документа: подписи, таблицы, QR-коды и печати.

Генерация PDF-отчета: Создание нового PDF-файла, идентичного оригиналу, но с нанесенными визуальными рамками вокруг всех найденных объектов.

Создание Тепловой Карты: Генерация единого изображения (тепловой карты), которое визуализирует расположение и концентрацию найденных объектов по всем страницам документа.

Отправка JSON-отчета: Предоставление структурированного JSON-файла с точными координатами (bounding box) для каждого найденного объекта.

Архитектура
Проект построен на архитектуре микросервисов с использованием Docker Compose для легкого развертывания и управления.

telegram_bot: Основной сервис бота (на базе python-telegram-bot). Он служит интерфейсом для пользователя, принимает файлы и управляет процессом анализа (оркестратор).

ml_service: Бэкенд-сервис на FastAPI, который содержит все 4 модели машинного обучения. Он принимает изображения страниц от бота, выполняет детекцию и возвращает JSON с координатами.

Технологический Стек
Язык: Python

Бэкенд ML-сервиса: FastAPI

Интерфейс бота: python-telegram-bot

Оркестрация: Docker Compose

Обработка PDF: PyMuPDF

Машинное обучение: PyTorch

Используемые Модели
Все модели выполняются в едином PyTorch-окружении:

Подписи: tech4humans/yolov8s-signature-detector

Таблицы: keremberke/yolov8m-table-extraction

QR-коды: Eric-Canas/qrdet

Печати: stamps-labs/yolov8-finetuned (из репозитория stamp2vec)

Установка и Запуск
Клонируйте этот репозиторий на ваш сервер. git clone [URL-вашего-репозитория]

Перейдите в папку проекта. cd doc_parser_bot

Клонируйте репозиторий stamp2vec в папку ml_service. Это необходимо для корректной работы модели детекции печатей. git clone https://github.com/stamps-labs/stamp2vec.git ml_service/stamp2vec

Создайте файл .env в корневой папке проекта.

Добавьте в .env файл токен вашего Telegram-бота: TELEGRAM_TOKEN=123456:ABC...

Соберите Docker-образы. Это может занять некоторое время при первом запуске. docker compose build

Запустите проект в фоновом режиме. docker compose up -d

Использование
Найдите вашего бота в Telegram.

Отправьте ему PDF-документ для анализа.

Бот пришлет в ответ три файла: PDF-отчет с пометками, изображение тепловой карты и JSON-файл с координатами.